<!DOCTYPE html>
<html lang="en">

    <%- include ('./partials/head.ejs') %>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>


<body>

    <%- include('./partials/nav.ejs') %>


    <div class = 'doc_Content' style="width: 75%;padding-bottom: 1000px; background-color:rgb(214, 214, 214);">

    

        <div class = "docu" style="width: 100%; height:100%;margin: 0 auto; text-align:center; " >
            <h2>File</h2>

            

              

        <center> 
            <div id="carouselExampleControls" class="carousel slide" data-ride="carousel" data-interval="false">
                <div class="carousel-inner">
                    
                    <% for(var i=0; i<doc.file_ID.length; i++){ %>
                        <% if (i == 0){ %>
                            <div class="carousel-item active">
                                <img src="http://localhost:5000/ViewPage_Default/document/<%= doc.file_ID[i] %>" width = "60%" height ="900px;" >
                                <!-- <img src="https://group-7-project-appdev.herokuapp.com/ViewPage_Default/document/<%= doc.file_ID[i] %>" width = "60%" height ="900px;" > -->
                              </div>
                        <% } else{ %>
                            <div class="carousel-item " >
                                <img src="http://localhost:5000/ViewPage_Default/document/<%= doc.file_ID[i] %>" width = "60%" height ="900px;" >
                                <!-- <img src="https://group-7-project-appdev.herokuapp.com/ViewPage_Default/document/<%= doc.file_ID[i] %>" width = "60%" height ="900px;" > -->
                              </div>
                            <% } %>
                      <% } %>
                

                </div>
                <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
                  <span style="font-weight:bolder; color:rgb(0, 0, 0); font-size:100px;"><</span>
                  <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
                    <span style="font-weight:bolder; color:rgb(0, 0, 0); font-size:100px;">></span>
                  <span class="sr-only">Next</span>
                </a>
              </div>
        </center>

            <% const tempExpirationDate = '10/22/2022' %> 
            <% const tempDateIssued = '08/25/2021' %>

        </div>
    </div>



    <div style = "background-color:rgb(226, 226, 226); width:95%; margin:auto; height: 100%;" >
  <div style= "background-color: grey; width:100% ;margin: auto; padding-inline: 10px;">
    <p style =" color:black; font-size: 40px;">Document Details:</p>  
    </div>
    



<div class = "container" >
    <div class = "row"  >
        <div class = "col-sm-6" >
        <div>
            <label for="doc_Group">Document Group:</label>
                <input type="text" id="docu_Group" name="docu_Group" value= "<%= doc.docu_Group %>" style ="width: 60%; height: 35px; margin-top:10px; margin-left: 10px;">
        </div>

        <div>
            <p class = "doc_Type">Document Type:         
                <select id="list" style ="width: 60%; height: 35px; margin-top:10px;  margin-left: 20px;">
                    <option value="placeholder"><%= doc.docu_Type %></option>
                    <option value="Permit">Permit</option>
                    <option value="Invoice">Invoice</option>
                    <option value="Receipt">Receipt</option>
                    <option value="Test1">Test1</option>
                </select></p> 
        </div>

        <div>
            <label for="doc_Group">Date Issued:</label>
                <input type="text" id="date_Issued" name="date_Issued" value= "<%= tempDateIssued %>" style ="width: 60%; height: 35px; margin-top:10px; margin-left: 49px;">
        </div>

        <div>
            <label for="doc_Group">Expiration Date:</label>
                <input type="text" id="doc_group" name="doc_group" value= "<%= tempExpirationDate %>" style ="width: 60%; height: 35px; margin-top:10px; margin-left: 23px;">
        </div>

        <div>
            <label for="doc_Group">Prerequisite Files:</label>
                <input type="text" id="#" name="#" value= "" style ="width: 60%; height: 35px; margin-top:10px; margin-left: 10px;">
        </div>

        </div>

        
        <div class = "col-sm-6">
        <p class = "date_Created">Data Created:<%= doc.date_Created%> </p>
        <p class = "created_By"> Created By: <%= doc.created_By%> </p>
        <p class = "date_Lmodified">Last Modified: <%= doc.date_Lmodified%> </p>
        <p class = "modified_By">Modified By: <%= doc.modified_By%> </p>
        </div>
                

        


        <div class = "w-100">
            <div class = "col">
        
        <div>
            <hr style= "border-top: 10px solid #8c8b8b; width: 100%; margin-top:50px;"></hr>
            
            <h1>Attached File:</h1>
            
                <div>
                    <% if(doc.file_ID.length > 0 ){ %>
                        <% doc.file_ID.forEach((element, index) => { %>
                        <form action="/Document_Details/<%=doc._id%>" method="POST" enctype="multipart/form-data">
                        <input type="text" id="<%= doc.file_ID[index]%>" name="file_name" value= "<%= doc.file_ID[index]%>" style ="width: 60%; height: 35px; margin-top:10px; margin-left: 49px;">
                       
                            <button for="file_name" type="submit" value="Delete" class="delbtn" style ="width: 5%; height:5%; text-align: center;">Delete</button>
                        </form>
                        <% }) %>
                    <% } %> 
                </div>

           
           


             <form action="/Document_Details/<%=doc._id%>" method="POST" enctype="multipart/form-data">
                            <div style ="margin-right: 10px;">
                            <button type="submit" value="Submit" class="btn btn-primary btn-block" style ="width: 10%; float:right; margin: 10px; background-color: rgb(121, 187, 21); border-color:rgb(121, 187, 21);">Add</button>
                                <label for="snippet"></label>
                                <div class="custom-file mb-3" style ="width: 60%; height: 35px; float:right;" >
                                    <input type="file" name="attch_file" id="attch_file" class="custom-file-input" required>
                                    <label for="attch_file" class="custom-file-label" style = "text-align:left; margin-left: 60px ">Choose file</label>
                                </div>
                            
                             </div>
                
             </form>
             <script type="text/javascript">

                $('.custom-file input').change(function (e) {
                    var files = [];
                    for (var i = 0; i < $(this)[0].files.length; i++) {
                        files.push($(this)[0].files[i].name);
                    }
                    $(this).next('.custom-file-label').html(files.join(', '));
                });
            
            </script>
          </div>
        </div>
    </div>
        
    </div>
</body>
</html>